{"name":"Gather At Indices of Dimension","type":"COMPOSITE_OPERATION","inputs":[{"name":"Input","data":[[1.0,2.0,3.0],[4.0,5.0,6.0],[7.0,8.0,9.0]],"shape":[3,3],"type":"DECIMAL","primitive_name":"Input","flow_state":"BOOT_SOURCE"},{"name":"Indices","data":[2,0],"shape":[2],"type":"INTEGER","primitive_name":"Input (1)","flow_state":"BOOT_SOURCE"},{"name":"Dim","data":1,"shape":[],"type":"INTEGER","primitive_name":"Input (1)","flow_state":"BOOT_SOURCE"}],"outputs":[{"name":"Output","primitive_name":"Output","flow_state":"UNBOUND"}],"operations":[{"name":"get_shape","primitive_name":"get_shape","type":"PRIMITIVE_OPERATION","position":{"x":550,"y":394},"inputs":[{"name":"input","shape":[3,3],"type":"DECIMAL","primitive_name":"input","flow_state":"BOOT_SINK"}],"outputs":[{"name":"shape","primitive_name":"shape","flow_state":"UNBOUND"}]},{"name":"get_dimension_size","primitive_name":"get_dimension_size","type":"PRIMITIVE_OPERATION","position":{"x":1206,"y":208},"inputs":[{"name":"array","shape":[2],"type":"INTEGER","primitive_name":"array","flow_state":"BOOT_SINK"},{"name":"dimension_index","data":0,"shape":[],"type":"INTEGER","primitive_name":"dimension_index","flow_state":"BOOT_SOURCE"}],"outputs":[{"name":"dimension_size","primitive_name":"dimension_size","flow_state":"UNBOUND"}]},{"name":"Put At Index","type":"COMPOSITE_OPERATION","position":{"x":1875,"y":394},"inputs":[{"name":"Input","shape":[2],"type":"INTEGER","primitive_name":"Input","flow_state":"REF_SINK"},{"name":"Value","shape":[],"type":"INTEGER","primitive_name":"Input (1)","flow_state":"REF_SINK"},{"name":"Dimension","data":0,"shape":[],"type":"INTEGER","primitive_name":"Input (1)","flow_state":"BOOT_SOURCE"},{"name":"Index","shape":[],"type":"INTEGER","primitive_name":"Input (1)","flow_state":"BOOT_SINK"}],"outputs":[{"name":"Output","primitive_name":"Output","flow_state":"UNBOUND"}],"operations":[{"name":"get_shape_1","primitive_name":"get_shape","type":"PRIMITIVE_OPERATION","position":{"x":411,"y":43},"inputs":[{"name":"input","shape":[2],"type":"INTEGER","primitive_name":"input","flow_state":"REF_SINK"}],"outputs":[{"name":"shape","primitive_name":"shape","flow_state":"UNBOUND"}]},{"name":"broadcast_to_shape_1","primitive_name":"broadcast_to_shape","type":"PRIMITIVE_OPERATION","position":{"x":919,"y":95},"inputs":[{"name":"target","shape":[],"type":"INTEGER","primitive_name":"target","flow_state":"REF_SINK"},{"name":"shape","shape":[1],"type":"INTEGER","primitive_name":"shape","flow_state":"REF_SINK"}],"outputs":[{"name":"result","primitive_name":"result","flow_state":"UNBOUND"}]},{"name":"expand_one_dimension","primitive_name":"expand_one_dimension","type":"PRIMITIVE_OPERATION","position":{"x":309,"y":581},"inputs":[{"name":"input","shape":[],"type":"INTEGER","primitive_name":"input","flow_state":"BOOT_SINK"},{"name":"dimension_index","data":0,"shape":[],"type":"INTEGER","primitive_name":"dimension_index","flow_state":"BOOT_SOURCE"}],"outputs":[{"name":"output","primitive_name":"output","flow_state":"UNBOUND"}]},{"name":"scatter","primitive_name":"scatter","type":"PRIMITIVE_OPERATION","position":{"x":1691,"y":455},"inputs":[{"name":"source_array","shape":[2],"type":"INTEGER","primitive_name":"source_array","flow_state":"REF_SINK"},{"name":"receiver_array","shape":[2],"type":"INTEGER","primitive_name":"receiver_array","flow_state":"REF_SINK"},{"name":"dimension_index","shape":[],"type":"INTEGER","primitive_name":"dimension_index","flow_state":"BOOT_SINK"},{"name":"selected_indices","shape":[1],"type":"INTEGER","primitive_name":"selected_indices","flow_state":"REF_SINK"}],"outputs":[{"name":"output","primitive_name":"output","flow_state":"UNBOUND"}]},{"name":"Is Scalar","primitive_name":"Is Scalar","type":"CLIENT_SIDE_CONSTRAINT_OPERATION","position":{"x":512,"y":359},"inputs":[{"name":"variable","shape":[],"type":"INTEGER","primitive_name":"variable","flow_state":"REF_SINK"}],"outputs":[]}],"links":[{"source":{"operation":"get_shape_1","data":"shape"},"sink":{"operation":"broadcast_to_shape_1","data":"shape"},"control_points":[]},{"source":{"operation":"this","data":"Input"},"sink":{"operation":"get_shape_1","data":"input"},"control_points":[]},{"source":{"operation":"this","data":"Value"},"sink":{"operation":"broadcast_to_shape_1","data":"target"},"control_points":[]},{"source":{"operation":"broadcast_to_shape_1","data":"result"},"sink":{"operation":"scatter","data":"source_array"},"control_points":[]},{"source":{"operation":"this","data":"Input"},"sink":{"operation":"scatter","data":"receiver_array"},"control_points":[{"x":854,"y":559}]},{"source":{"operation":"this","data":"Index"},"sink":{"operation":"expand_one_dimension","data":"input"},"control_points":[]},{"source":{"operation":"expand_one_dimension","data":"output"},"sink":{"operation":"scatter","data":"selected_indices"},"control_points":[]},{"source":{"operation":"this","data":"Dimension"},"sink":{"operation":"scatter","data":"dimension_index"},"control_points":[{"x":672,"y":601}]},{"source":{"operation":"scatter","data":"output"},"sink":{"operation":"this","data":"Output"},"control_points":[]},{"source":{"operation":"this","data":"Value"},"sink":{"operation":"Is Scalar","data":"variable"},"control_points":[]}]},{"name":"get_shape_1","primitive_name":"get_shape","type":"PRIMITIVE_OPERATION","position":{"x":1025,"y":768},"inputs":[{"name":"input","shape":[2],"type":"INTEGER","primitive_name":"input","flow_state":"REF_SINK"}],"outputs":[{"name":"shape","primitive_name":"shape","flow_state":"UNBOUND"}]},{"name":"broadcast_to_shape_1","primitive_name":"broadcast_to_shape","type":"PRIMITIVE_OPERATION","position":{"x":1465,"y":726},"inputs":[{"name":"target","data":1,"shape":[],"type":"INTEGER","primitive_name":"target","flow_state":"BOOT_SOURCE"},{"name":"shape","shape":[1],"type":"INTEGER","primitive_name":"shape","flow_state":"REF_SINK"}],"outputs":[{"name":"result","primitive_name":"result","flow_state":"UNBOUND"}]},{"name":"Put At Index (1)","type":"COMPOSITE_OPERATION","position":{"x":1929,"y":682},"inputs":[{"name":"Input","shape":[2],"type":"INTEGER","primitive_name":"Input","flow_state":"REF_SINK"},{"name":"Value","shape":[],"type":"INTEGER","primitive_name":"Input (1)","flow_state":"REF_SINK"},{"name":"Dimension","data":0,"shape":[],"type":"INTEGER","primitive_name":"Input (1)","flow_state":"BOOT_SOURCE"},{"name":"Index","data":0,"shape":[],"type":"INTEGER","primitive_name":"Input (1)","flow_state":"BOOT_SOURCE"}],"outputs":[{"name":"Output","primitive_name":"Output","flow_state":"UNBOUND"}],"operations":[{"name":"get_shape_1","primitive_name":"get_shape","type":"PRIMITIVE_OPERATION","position":{"x":411,"y":43},"inputs":[{"name":"input","shape":[2],"type":"INTEGER","primitive_name":"input","flow_state":"REF_SINK"}],"outputs":[{"name":"shape","primitive_name":"shape","flow_state":"UNBOUND"}]},{"name":"broadcast_to_shape_1","primitive_name":"broadcast_to_shape","type":"PRIMITIVE_OPERATION","position":{"x":919,"y":108},"inputs":[{"name":"target","shape":[],"type":"INTEGER","primitive_name":"target","flow_state":"REF_SINK"},{"name":"shape","shape":[1],"type":"INTEGER","primitive_name":"shape","flow_state":"REF_SINK"}],"outputs":[{"name":"result","primitive_name":"result","flow_state":"UNBOUND"}]},{"name":"expand_one_dimension","primitive_name":"expand_one_dimension","type":"PRIMITIVE_OPERATION","position":{"x":309,"y":579},"inputs":[{"name":"input","shape":[],"type":"INTEGER","primitive_name":"input","flow_state":"BOOT_SINK"},{"name":"dimension_index","data":0,"shape":[],"type":"INTEGER","primitive_name":"dimension_index","flow_state":"BOOT_SOURCE"}],"outputs":[{"name":"output","primitive_name":"output","flow_state":"UNBOUND"}]},{"name":"scatter","primitive_name":"scatter","type":"PRIMITIVE_OPERATION","position":{"x":1691,"y":455},"inputs":[{"name":"source_array","shape":[2],"type":"INTEGER","primitive_name":"source_array","flow_state":"REF_SINK"},{"name":"receiver_array","shape":[2],"type":"INTEGER","primitive_name":"receiver_array","flow_state":"REF_SINK"},{"name":"dimension_index","shape":[],"type":"INTEGER","primitive_name":"dimension_index","flow_state":"BOOT_SINK"},{"name":"selected_indices","shape":[1],"type":"INTEGER","primitive_name":"selected_indices","flow_state":"REF_SINK"}],"outputs":[{"name":"output","primitive_name":"output","flow_state":"UNBOUND"}]},{"name":"Is Scalar","primitive_name":"Is Scalar","type":"CLIENT_SIDE_CONSTRAINT_OPERATION","position":{"x":512,"y":359},"inputs":[{"name":"variable","shape":[],"type":"INTEGER","primitive_name":"variable","flow_state":"REF_SINK"}],"outputs":[]}],"links":[{"source":{"operation":"get_shape_1","data":"shape"},"sink":{"operation":"broadcast_to_shape_1","data":"shape"},"control_points":[]},{"source":{"operation":"this","data":"Input"},"sink":{"operation":"get_shape_1","data":"input"},"control_points":[]},{"source":{"operation":"this","data":"Value"},"sink":{"operation":"broadcast_to_shape_1","data":"target"},"control_points":[]},{"source":{"operation":"broadcast_to_shape_1","data":"result"},"sink":{"operation":"scatter","data":"source_array"},"control_points":[]},{"source":{"operation":"this","data":"Input"},"sink":{"operation":"scatter","data":"receiver_array"},"control_points":[{"x":854,"y":559}]},{"source":{"operation":"this","data":"Index"},"sink":{"operation":"expand_one_dimension","data":"input"},"control_points":[]},{"source":{"operation":"expand_one_dimension","data":"output"},"sink":{"operation":"scatter","data":"selected_indices"},"control_points":[]},{"source":{"operation":"this","data":"Dimension"},"sink":{"operation":"scatter","data":"dimension_index"},"control_points":[{"x":672,"y":604}]},{"source":{"operation":"scatter","data":"output"},"sink":{"operation":"this","data":"Output"},"control_points":[]},{"source":{"operation":"this","data":"Value"},"sink":{"operation":"Is Scalar","data":"variable"},"control_points":[]}]},{"name":"broadcast_to_shape","primitive_name":"broadcast_to_shape","type":"PRIMITIVE_OPERATION","position":{"x":2483,"y":300},"inputs":[{"name":"target","shape":[2],"type":"INTEGER","primitive_name":"target","flow_state":"BOOT_SINK"},{"name":"shape","shape":[2],"type":"INTEGER","primitive_name":"shape","flow_state":"REF_SINK"}],"outputs":[{"name":"result","primitive_name":"result","flow_state":"UNBOUND"}]},{"name":"equal","primitive_name":"equal","type":"PRIMITIVE_OPERATION","position":{"x":2389,"y":934},"inputs":[{"name":"left_operand","shape":[],"type":"INTEGER","primitive_name":"left_operand","flow_state":"BOOT_SINK"},{"name":"right_operand","data":0,"shape":[],"type":"INTEGER","primitive_name":"right_operand","flow_state":"BOOT_SOURCE"}],"outputs":[{"name":"is_equal","primitive_name":"is_equal","flow_state":"UNBOUND"}]},{"name":"If Else","type":"CONDITIONAL_OPERATION","position":{"x":2942,"y":509},"inputs":[{"name":"Is True","shape":[],"type":"BOOLEAN","primitive_name":"Is True","flow_state":"REF_SINK"},{"name":"Input","shape":[2,1],"type":"INTEGER","primitive_name":"Input","flow_state":"REF_SINK"},{"name":"New Index","shape":[],"type":"INTEGER","primitive_name":"Input (1)","flow_state":"BOOT_SINK"}],"outputs":[{"name":"Output","primitive_name":"Output","flow_state":"UNBOUND"}],"operations_if_true":[{"name":"identity","primitive_name":"identity","type":"PRIMITIVE_OPERATION","position":{"x":760,"y":154},"inputs":[{"name":"input","primitive_name":"input"}],"outputs":[{"name":"output","primitive_name":"output","flow_state":"UNBOUND"}]}],"links_if_true":[{"source":{"operation":"this","data":"Input"},"sink":{"operation":"identity","data":"input"},"control_points":[]},{"source":{"operation":"identity","data":"output"},"sink":{"operation":"this","data":"Output"},"control_points":[]}],"operations_if_false":[{"name":"swap_dimensions","primitive_name":"swap_dimensions","type":"PRIMITIVE_OPERATION","position":{"x":542,"y":247},"inputs":[{"name":"array","shape":[2,1],"type":"INTEGER","primitive_name":"array","flow_state":"REF_SINK"},{"name":"dimension_index_1","data":0,"shape":[],"type":"INTEGER","primitive_name":"dimension_index_1","flow_state":"BOOT_SOURCE"},{"name":"dimension_index_2","shape":[],"type":"INTEGER","primitive_name":"dimension_index_2","flow_state":"BOOT_SINK"}],"outputs":[{"name":"swapped_array","primitive_name":"swapped_array","flow_state":"UNBOUND"}]}],"links_if_false":[{"source":{"operation":"this","data":"Input"},"sink":{"operation":"swap_dimensions","data":"array"},"control_points":[]},{"source":{"operation":"this","data":"New Index"},"sink":{"operation":"swap_dimensions","data":"dimension_index_2"},"control_points":[]},{"source":{"operation":"swap_dimensions","data":"swapped_array"},"sink":{"operation":"this","data":"Output"},"control_points":[]}],"condition":{"name":"Is True"}},{"name":"broadcast_to_shape_2","primitive_name":"broadcast_to_shape","type":"PRIMITIVE_OPERATION","position":{"x":3391,"y":352},"inputs":[{"name":"target","shape":[1,2],"type":"INTEGER","primitive_name":"target","flow_state":"REF_SINK"},{"name":"shape","shape":[2],"type":"INTEGER","primitive_name":"shape","flow_state":"REF_SINK"}],"outputs":[{"name":"result","primitive_name":"result","flow_state":"UNBOUND"}]},{"name":"gather","primitive_name":"gather","type":"PRIMITIVE_OPERATION","position":{"x":3899,"y":43},"inputs":[{"name":"input","shape":[3,3],"type":"DECIMAL","primitive_name":"input","flow_state":"BOOT_SINK"},{"name":"index_array","shape":[3,2],"type":"INTEGER","primitive_name":"index_array","flow_state":"REF_SINK"},{"name":"dimension_index","shape":[],"type":"INTEGER","primitive_name":"dimension_index","flow_state":"BOOT_SINK"}],"outputs":[{"name":"gather_array","primitive_name":"gather_array","flow_state":"UNBOUND"}]},{"name":"Data Type Is Integer","primitive_name":"Data Type Is Integer","type":"CLIENT_SIDE_CONSTRAINT_OPERATION","position":{"x":635,"y":269},"inputs":[{"name":"variable","shape":[2],"type":"INTEGER","primitive_name":"variable","flow_state":"BOOT_SINK"}],"outputs":[]}],"links":[{"source":{"operation":"this","data":"Input"},"sink":{"operation":"get_shape","data":"input"},"control_points":[]},{"source":{"operation":"get_shape","data":"shape"},"sink":{"operation":"Put At Index","data":"Input"},"control_points":[]},{"source":{"operation":"get_dimension_size","data":"dimension_size"},"sink":{"operation":"Put At Index","data":"Value"},"control_points":[]},{"source":{"operation":"this","data":"Dim"},"sink":{"operation":"Put At Index","data":"Index"},"control_points":[{"x":456,"y":582}]},{"source":{"operation":"this","data":"Input"},"sink":{"operation":"gather","data":"input"},"control_points":[]},{"source":{"operation":"get_shape","data":"shape"},"sink":{"operation":"get_shape_1","data":"input"},"control_points":[]},{"source":{"operation":"get_shape_1","data":"shape"},"sink":{"operation":"broadcast_to_shape_1","data":"shape"},"control_points":[]},{"source":{"operation":"get_dimension_size","data":"dimension_size"},"sink":{"operation":"Put At Index (1)","data":"Value"},"control_points":[]},{"source":{"operation":"broadcast_to_shape_1","data":"result"},"sink":{"operation":"Put At Index (1)","data":"Input"},"control_points":[]},{"source":{"operation":"Put At Index (1)","data":"Output"},"sink":{"operation":"broadcast_to_shape","data":"shape"},"control_points":[]},{"source":{"operation":"this","data":"Dim"},"sink":{"operation":"equal","data":"left_operand"},"control_points":[{"x":821,"y":996}]},{"source":{"operation":"equal","data":"is_equal"},"sink":{"operation":"If Else","data":"Is True"},"control_points":[]},{"source":{"operation":"broadcast_to_shape","data":"result"},"sink":{"operation":"If Else","data":"Input"},"control_points":[]},{"source":{"operation":"this","data":"Dim"},"sink":{"operation":"If Else","data":"New Index"},"control_points":[{"x":519,"y":655}]},{"source":{"operation":"Put At Index","data":"Output"},"sink":{"operation":"broadcast_to_shape_2","data":"shape"},"control_points":[]},{"source":{"operation":"If Else","data":"Output"},"sink":{"operation":"broadcast_to_shape_2","data":"target"},"control_points":[]},{"source":{"operation":"broadcast_to_shape_2","data":"result"},"sink":{"operation":"gather","data":"index_array"},"control_points":[]},{"source":{"operation":"gather","data":"gather_array"},"sink":{"operation":"this","data":"Output"},"control_points":[]},{"source":{"operation":"this","data":"Indices"},"sink":{"operation":"get_dimension_size","data":"array"},"control_points":[]},{"source":{"operation":"this","data":"Indices"},"sink":{"operation":"Data Type Is Integer","data":"variable"},"control_points":[]},{"source":{"operation":"this","data":"Indices"},"sink":{"operation":"broadcast_to_shape","data":"target"},"control_points":[{"x":1980,"y":157}]},{"source":{"operation":"this","data":"Dim"},"sink":{"operation":"gather","data":"dimension_index"},"control_points":[]}]}